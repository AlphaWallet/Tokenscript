<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <link rel="tokenscript" href="EntryToken.xml"/>
    <!-- this is for token negotiation! -->
    <meta name="token.filter" content="objectClass=entrytoken"/>
    <!-- if without linked TokenScript, consider a synax like this
    <meta name="token.scope" content="ethereum:1/0x63cCEF733a093E5Bd773b41C96D3eCE361464942/"/>
    -->
    <title>Showing the cards in a web page</title>
    <script type="text/javascript" src="tokenscript-bootstrap.js"/>
    <script type="text/javascript">
        // the following event is triggered every time when a token is negotiated
        // and that is why an event listener is used in place of a promise;
        window.addEventListener("ontokennegotiation",  (token) => {
            const tokenCard = new token.TokenCard();
            // might be renderIn, need to find a comfortable method for seasoned React JS user
            await tokenCard.render(document.getElementById("card_container"));
            // alternatively, tokenCard.renderAsItem(…)
            document.getElementById("enter_button").onclick = (event) => {
                token.enterAction().then(
                    // … code to handle the result of enter action.
                )
            };
        });

        function renegotiate() {
            // Negotiator.negotiate() returns a promise, but in this case
            // the developer doesn't need to save it or call .then()
            // because a window.ontokennegotiation is triggered.
            // the developer will want to save it or call .then() if they
            // have things to do specifically for this round of negotiation
            Negotiator.negotiate('entrytoken', 'l=Syndey');
        }
    </script>
</head>
<body>
<h1>Demonstration of showing a card in a web page</h1>
<h2>Token Card</h2>
<div id="card_container"></div>
<p><button id="enter_button">Enter</button></p>
<p><button id="new_token" onclick="renegotiate">
    Try a different token in Sydney</button></p>
</body>
</html>
