<?xml version="1.0" encoding="UTF-8" standalone="no"?><ts:token xmlns:ts="http://tokenscript.org/2019/04/tokenscript" xmlns="http://www.w3.org/1999/xhtml"><ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:SignedInfo>
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>
<ds:Reference URI="">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
<ds:DigestValue>kotHmW06pT8TnIenQmt2lnZm1X3n65I8l+8xC5vTvYc=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
<ds:SignatureValue>
Ey77vRTLrW94dZVOcGT9VOCeHj+6K0HFMwjJeqlDnfvEKQ2Xl++aIWnBrOhM8mn1uVkE/KWUak3g
jjnS4PI/e4hp95ztmslwKgs8FBp6QDuvSumXuKWcPWqJEXidP6xt7BcB2e3C92l0NVnuKN3w9/BR
bdk2ZoOSVU3a8DUHCcCK2Lid/Mgb6Fyo3NSdpTFtdPA1saB0i8J+iRoJwHGxf7yBrhi/EJdlPkMH
4JRm64oq9Z/T0eNGT78H0MeOkS+s9+EXmWt641g91T3ioJG5UTEmc/zg6fqbmbNn8OAcxPznBV9t
sXi6W2hdGgPSwXfoX9rA8GzLrBCMJKac8/TYQQ==
</ds:SignatureValue>
<ds:KeyInfo>
<ds:KeyName>Shong Wang</ds:KeyName>
<ds:KeyValue>
<ds:RSAKeyValue>
<ds:Modulus>
ql1jleB5eU+FiIK50QwMc1pS6ieMxqciwdYHdOalEyLZZ0Swt+3Ls24g1Ktar+aJJjSJO8OjUNse
BqECPSP2rGYIfNN7echgXEJtr9MZ5vz/G+zEyZB4lfJaBb3iGreQerdgktcjla6PC/bSiFrWs9zA
tMp1uowMWV2T5LY7N1SYw6uLP3c8CYog7u14zwHrVgWt8MeKfgSznXyVb3A9REYo7qqnAsJq4zfR
UfM1KQeobcLZVaPSafK6BRn0tGDoxX76ffwILRUxtMg6Ivh/OYT5cOihKhVWFRrl1/2wLoMSb+hY
nui97tkJyEVV79c/sR1moMcsqDyaXsHc/Mz0aQ==
</ds:Modulus>
<ds:Exponent>AQAB</ds:Exponent>
</ds:RSAKeyValue>
</ds:KeyValue>
<ds:X509Data>
<ds:X509Certificate>
MIIE/DCCAuSgAwIBAgIDFBtpMA0GCSqGSIb3DQEBCwUAMHkxEDAOBgNVBAoTB1Jvb3QgQ0ExHjAc
BgNVBAsTFWh0dHA6Ly93d3cuY2FjZXJ0Lm9yZzEiMCAGA1UEAxMZQ0EgQ2VydCBTaWduaW5nIEF1
dGhvcml0eTEhMB8GCSqGSIb3DQEJARYSc3VwcG9ydEBjYWNlcnQub3JnMB4XDTE5MDQxNTEzNDAy
NVoXDTE5MTAxMjEzNDAyNVowFTETMBEGA1UEAxMKc2hvbmcud2FuZzCCASIwDQYJKoZIhvcNAQEB
BQADggEPADCCAQoCggEBAKpdY5XgeXlPhYiCudEMDHNaUuonjManIsHWB3TmpRMi2WdEsLfty7Nu
INSrWq/miSY0iTvDo1DbHgahAj0j9qxmCHzTe3nIYFxCba/TGeb8/xvsxMmQeJXyWgW94hq3kHq3
YJLXI5Wujwv20oha1rPcwLTKdbqMDFldk+S2OzdUmMOriz93PAmKIO7teM8B61YFrfDHin4Es518
lW9wPURGKO6qpwLCauM30VHzNSkHqG3C2VWj0mnyugUZ9LRg6MV++n38CC0VMbTIOiL4fzmE+XDo
oSoVVhUa5df9sC6DEm/oWJ7ove7ZCchFVe/XP7EdZqDHLKg8ml7B3PzM9GkCAwEAAaOB8DCB7TAM
BgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIDqDA0BgNVHSUELTArBggrBgEFBQcDAgYIKwYBBQUH
AwEGCWCGSAGG+EIEAQYKKwYBBAGCNwoDAzAzBggrBgEFBQcBAQQnMCUwIwYIKwYBBQUHMAGGF2h0
dHA6Ly9vY3NwLmNhY2VydC5vcmcvMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwuY2FjZXJ0
Lm9yZy9yZXZva2UuY3JsMC8GA1UdEQQoMCaCCnNob25nLndhbmegGAYIKwYBBQUHCAWgDAwKc2hv
bmcud2FuZzANBgkqhkiG9w0BAQsFAAOCAgEAMDUSBLJIbJWlq7nkyMIvyOsb7LvFGsTxh5LzK9qU
0rGwKRbArMddz/n23N6FXDr0QwFw1lrkI5dmJYOawAUF7XfXcscO2QmgerQnRWBFa2yFI4J5ML3V
986frNEho+JzNY0cj5JTDsyll6l4hRUvJuYOpqDc2tE3nCw6zu1caWCbWI5oC5+1CgdKznEqaMbr
GH4Ao2ah/EJuk/F4GXok6dmzLY5c6PpElv2n+tvXc4Xbj1qatflcqk3dxkjJXVU/ebRGSl/vvkm8
PkB/g6d9Tq48twsjqEzr8wsTrDr/+suS4JBMjYT66PyNNEtsWClJ/jYdXOedRlFLdJlkNe3gVb+9
UYJ9/StAy+8dlRH+7Q/bBPrt2GzI3fgT7LKEKtTsVhS1+XrljXqh5BZdrZEwYlyROQ4yR+doBp7E
m3MxJTzJWdI/Rm7w9cmQT5Nai6JU4oPYkya8lOvNXZveN/PYFN0Ie3PQ9lVBp/ABpgILjjQOZraD
pn/rc/F8mH3P0xc5+6hKqFXDEBTWy/PabBs3QSyua3Db25Olq2KXC6hUVt/tvRRA1QVQAbhuGhqJ
V63WCiZw9mNP21d8YemZairuhBZ/DEDMZs9WGQMN6oaBawVCkQyk1hVPLvq/pD8jekXKYc2YYp8P
NzwOeODqfDg+dlvdL+7R0kJ6VsTsJYwFur4=
</ds:X509Certificate>
<ds:X509Certificate>
MIIHWTCCBUGgAwIBAgIDCkGKMA0GCSqGSIb3DQEBCwUAMHkxEDAOBgNVBAoTB1Jvb3QgQ0ExHjAc
BgNVBAsTFWh0dHA6Ly93d3cuY2FjZXJ0Lm9yZzEiMCAGA1UEAxMZQ0EgQ2VydCBTaWduaW5nIEF1
dGhvcml0eTEhMB8GCSqGSIb3DQEJARYSc3VwcG9ydEBjYWNlcnQub3JnMB4XDTExMDUyMzE3NDgw
MloXDTIxMDUyMDE3NDgwMlowVDEUMBIGA1UEChMLQ0FjZXJ0IEluYy4xHjAcBgNVBAsTFWh0dHA6
Ly93d3cuQ0FjZXJ0Lm9yZzEcMBoGA1UEAxMTQ0FjZXJ0IENsYXNzIDMgUm9vdDCCAiIwDQYJKoZI
hvcNAQEBBQADggIPADCCAgoCggIBAKtJNRFIfNImflOUz0Op3SjXQiqL84d4GVh8D57aiX3h++ty
kA10oZZkq5+gJJlz2uJVdscXe/UErEa4w75/ZI0QbCTzYZzA8pD6Ueb1aQFjww9W4kpCz+JEjCUo
qMV5CX1GuYrz6fM0KQhF5Byfy5QEHIGoFLOYZcRD7E6CjQnRvapbjZLQ7N6QxX8KwuPr5jFaXnQ+
lzNZ6MMDPWAzv/fRb0fEze5ig1JuLgiapNkVGJGmhZJHsK5I6223IeyFGmhyNav/8BBdwPSUp2rV
O5J+TJAFfpPBLIukjmJ0FXFuC3ED6q8VOJrU0gVyb4z5K+taciX5OUbjchs+BMNkJyIQKopPWKcD
rb60LhPtXapI19V91Cp7XPpGBFDkzA5CW4zt2/LP/JaT4NsRNlRiNDiPDGCbO5dWOK3z0luLoFvq
Tpa4fNfVoIZwQNORKbeiPK31jLvPGpKK5DR7wNhsX+kKwsOnIJpa3yxdUly6R9Wb7yQocDggL9V/
KcCyQQNokszgnMyXS0XvOhAKq3A6mJVwrTWx6oUrpByAITGprmB6gCZIALgBwJNjVSKRPFbnr9s6
JfOPMVTqJouBWfmh0VMRxXudA/Z0EeBtsSw/LIaRmXGapneLNGDRFLQsrJ2vjBDTn8Rq+G8T/HNZ
92ZCdB6K4/jc0m+YnMtHmJVABfvpAgMBAAGjggINMIICCTAdBgNVHQ4EFgQUdahxYEyIE/B42Yl3
tW3Fid+8sXowgaMGA1UdIwSBmzCBmIAUFrUyG9TH8+DmjvO90rA67rI5GNGhfaR7MHkxEDAOBgNV
BAoTB1Jvb3QgQ0ExHjAcBgNVBAsTFWh0dHA6Ly93d3cuY2FjZXJ0Lm9yZzEiMCAGA1UEAxMZQ0Eg
Q2VydCBTaWduaW5nIEF1dGhvcml0eTEhMB8GCSqGSIb3DQEJARYSc3VwcG9ydEBjYWNlcnQub3Jn
ggEAMA8GA1UdEwEB/wQFMAMBAf8wXQYIKwYBBQUHAQEEUTBPMCMGCCsGAQUFBzABhhdodHRwOi8v
b2NzcC5DQWNlcnQub3JnLzAoBggrBgEFBQcwAoYcaHR0cDovL3d3dy5DQWNlcnQub3JnL2NhLmNy
dDBKBgNVHSAEQzBBMD8GCCsGAQQBgZBKMDMwMQYIKwYBBQUHAgEWJWh0dHA6Ly93d3cuQ0FjZXJ0
Lm9yZy9pbmRleC5waHA/aWQ9MTAwNAYJYIZIAYb4QgEIBCcWJWh0dHA6Ly93d3cuQ0FjZXJ0Lm9y
Zy9pbmRleC5waHA/aWQ9MTAwUAYJYIZIAYb4QgENBEMWQVRvIGdldCB5b3VyIG93biBjZXJ0aWZp
Y2F0ZSBmb3IgRlJFRSwgZ28gdG8gaHR0cDovL3d3dy5DQWNlcnQub3JnMA0GCSqGSIb3DQEBCwUA
A4ICAQApKIWuRKm5r6R5E/CooyuXYPNc7uMvwfbiZqARrjY3OnYVBFPqQvX56sAV2KaC2eRhrnIL
KVyQQ+hBsuF32wITRHhHVa9Y/MyY9kW50SD42CEH/m2qc9SzxgfpCYXMO/K2viwcJdVxjDm1Luq+
GIG6sJO4D+Pm1yaMMVpyA4RS5qb1MyJFCsgLDYq4Nm+QCaGrvdfVTi5xotSu+qdUK+s1jVq3VIgv
7nSf7UgWyg1I0JTTrKSi9iTfkuO960NAkW4cGI5WtIIS86mTn9S8nK2cde5alxuV53QtHA+wLJef
+6kzOXrnAzqSjiL2jA3k2X4Ndhj3AfnvlpaiVXPAPHG0HRpWQ7fDCo1y/OIQCQtBzoyUoPkD/XFz
S4pXM+WOdH4VAQDmzEoc53+VGS3FpQyLu7XthbNc09+4ufLKxw0BFKxwWMWMjTPUnWajGlCVI/xI
4AZDEtnNp4Y5LzZyo4AQ5OHz0ctbGsDkgJp8E3MGT9ujayQKurMcvEp4u+XjdTilSKeiHq921F73
OIZWWonO1sOnebJSoMbxhbQljPI/lrMQ2Y1sVzufb4Y6GIIiNsiwkTjbKqGTqoQ/9SdlrnPVyNXT
d+pLncdBu8fA46A/5H2kjXPmEkvfoXNzczqA6NXLji/L6hOn1kGLrPo8idck9U604GGSt/M3mMS+
lqO3ig==
</ds:X509Certificate>
<ds:X509Certificate>
MIIHPTCCBSWgAwIBAgIBADANBgkqhkiG9w0BAQQFADB5MRAwDgYDVQQKEwdSb290IENBMR4wHAYD
VQQLExVodHRwOi8vd3d3LmNhY2VydC5vcmcxIjAgBgNVBAMTGUNBIENlcnQgU2lnbmluZyBBdXRo
b3JpdHkxITAfBgkqhkiG9w0BCQEWEnN1cHBvcnRAY2FjZXJ0Lm9yZzAeFw0wMzAzMzAxMjI5NDla
Fw0zMzAzMjkxMjI5NDlaMHkxEDAOBgNVBAoTB1Jvb3QgQ0ExHjAcBgNVBAsTFWh0dHA6Ly93d3cu
Y2FjZXJ0Lm9yZzEiMCAGA1UEAxMZQ0EgQ2VydCBTaWduaW5nIEF1dGhvcml0eTEhMB8GCSqGSIb3
DQEJARYSc3VwcG9ydEBjYWNlcnQub3JnMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA
ziLA4kZ97DYoB1CW8qAzQIxL8TtmPzHlawI229Z89vGIj053NgVBlfkJ8BLPRoZzYLdufujAWGSu
zbCtRRcMY/pnCujW0r8+55jE8Ez64AO7NV1sId6eINm6zWYyN3L69wj1x81YyY7nDl7qPv4coRQK
FWyGhFtkZip6qUtTefWIonvuLwphK42yfk1WpRPs6tqSnqxEQR5YYGUFZvjARL3LlPdCfgv3ZWiY
UQXw8wWRBB0bF4LsyFe7w2t6iPGwcswlWyCR7BYCEo8y6RcYSNDHBS4CMEK4JZwFaz+qOqfrU0j3
6NK2B5jcG8Y0f3/JHIJ6BVgrCFvzOKKrF11myZjXnhCLotLddJr3cQxyYN/Nb5gznZY0dj4kepKw
DpUeb+agRThHqtdB7Uq3EvbXG4OKDy7YCbZZ16oE/9KTfWgu3YtLq1i6L43qlaegw1SJpfvbi1Ei
nbLDvhG+LJGGi5Z4rSDTii8aP8bQUWWHIbEZAWV/RRyH9XzQQUxPKZgh/TMfdQwEUfoZd9vUFBzu
gcMd9Zi3aQaRIt0AUMyBMawSB3s42mhb5ivUfslfrejrckzzAeVLIL+aplfKkQABi6F1ITe1Yw1n
PkZPcCBnzsXWWdsC4PDSy826YreQQejdIOQpvGQpQsgi3Hia/0PsmBsJUUtaWsJx8cTLc6nloQsC
AwEAAaOCAc4wggHKMB0GA1UdDgQWBBQWtTIb1Mfz4OaO873SsDrusjkY0TCBowYDVR0jBIGbMIGY
gBQWtTIb1Mfz4OaO873SsDrusjkY0aF9pHsweTEQMA4GA1UEChMHUm9vdCBDQTEeMBwGA1UECxMV
aHR0cDovL3d3dy5jYWNlcnQub3JnMSIwIAYDVQQDExlDQSBDZXJ0IFNpZ25pbmcgQXV0aG9yaXR5
MSEwHwYJKoZIhvcNAQkBFhJzdXBwb3J0QGNhY2VydC5vcmeCAQAwDwYDVR0TAQH/BAUwAwEB/zAy
BgNVHR8EKzApMCegJaAjhiFodHRwczovL3d3dy5jYWNlcnQub3JnL3Jldm9rZS5jcmwwMAYJYIZI
AYb4QgEEBCMWIWh0dHBzOi8vd3d3LmNhY2VydC5vcmcvcmV2b2tlLmNybDA0BglghkgBhvhCAQgE
JxYlaHR0cDovL3d3dy5jYWNlcnQub3JnL2luZGV4LnBocD9pZD0xMDBWBglghkgBhvhCAQ0ESRZH
VG8gZ2V0IHlvdXIgb3duIGNlcnRpZmljYXRlIGZvciBGUkVFIGhlYWQgb3ZlciB0byBodHRwOi8v
d3d3LmNhY2VydC5vcmcwDQYJKoZIhvcNAQEEBQADggIBACjH7pyCArpcgBLKNQodgW+JapnM8mgP
f6fhjViVPr3yBsOQWqy1YPaZQwGjiHCcnWKdpIevZ1gNMDY75q1I08t0AoZxPuIrA2jxNGJARjtT
6ij0rPtmlVOKTV39O9lg18p5aTuxZZKmxoGCXJzN600BiqXfEVWqFcofN8CCmHBh22p8lqOOLlQ+
TyGpkO/cgr/c6EWtTZBzCDyUZbAEmXZ/4rzCahWqlwQ3JNgelE5tDlG+1sSPypZt90Pf6DBlJzt7
u0NDY8RD97LsaMzhGY4i+5jhe1o+ATc7iwiwovOVThrLm82asduycPAtStvYsONvRUgzEv/+PDIq
VPfE94rwiCPCR/5kenHA0R6mY7AHfqQv0wGP3J8rtsYIqQ+TSCX8Ev2fQtzzxD72V7DX3WnRBnc0
CkvSyqD/HMaMyRa+xMwyN2hzXwj7UfdJUzYFCpUCTPJ5GhD22Dp1nPMd8aINcGeGG7MW9S/lpOt5
hvk9C8JzC6WZrG/8Z7jlLwumGCSNe9FINSkYQKyTYOGWhlC0elnYjyELn8+CkcY7v2vcB5G5l1Yj
qrZslMZIBjzkzk6q5PYvCdxTby78dOs6Y5nCpqyJvKeyRKANihDjbPIky/qbn3BHLt4Ui9SyIAmW
omTxJBzcoTWcFbLUvFUufQb1nA5V9FrWk9p2rSVzTMVD
</ds:X509Certificate>
</ds:X509Data>
</ds:KeyInfo>
</ds:Signature>

  <ts:name xml:lang="en">Admission Ticket Token</ts:name>
  <ts:name xml:lang="zh">入場券</ts:name>
  <ts:name xml:lang="es">Boleto de admisión</ts:name>
  <ts:name form="collective" xml:lang="en">Admission Ticket Tokens</ts:name>
  <ts:name form="collective" xml:lang="zh">入場券</ts:name>
  <ts:name form="collective" xml:lang="es">Boletos de admisión</ts:name>
  <!-- TODO: will make separate Tokenscript for ERC875 -->
  <ts:contract id="erc875" interface="erc875">
    <ts:address network="3">0x0C8D487DD27D7c4A027D9f92915659139e0b2FF2</ts:address>
  </ts:contract>
  <ts:selections>
    <ts:selection id="expired">
      <ts:name xml:lang="en">Expired Tickets</ts:name>
      <ts:name xml:lang="zh">已经过期的票</ts:name>
      <ts:filter>expired</ts:filter>
    </ts:selection>
  </ts:selections>
  <ts:cards>
    <ts:token-card>
      <style type="text/css">	.tbml-count {
	  font-family: "SourceSansPro";
	  font-weight: bolder;
	  font-size: 21px;
	  color: rgb(117, 185, 67);
	}
	.tbml-category {
	  font-family: "SourceSansPro";
	  font-weight: lighter;
	  font-size: 21px;
	  color: rgb(67, 67, 67);
	}
	.tbml-venue {
	  font-family: "SourceSansPro";
	  font-weight: lighter;
	  font-size: 16px;
	  color: rgb(67, 67, 67);
	}
	.tbml-date {
	  font-family: "SourceSansPro";
	  font-weight: bold;
	  font-size: 14px;
	  color: rgb(112, 112, 112);
	  margin-left: 7px;
	  margin-right: 7px;
	}
	.tbml-time {
	  font-family: "SourceSansPro";
	  font-weight: lighter;
	  font-size: 16px;
	  color: rgb(112, 112, 112);
	}
    html {
    }
    
    body {
    padding: 0px;
    margin: 0px;
    }
    
    div {
    margin: 0px;
    padding: 0px;
    }

    .data-icon {
    height:16px;
    vertical-align: middle
    }
</style>
      <ts:view-iconified xml:lang="en">
        <p>An Admission Ticket Token</p>
      </ts:view-iconified>
      <ts:view xml:lang="en">
        <script type="text/javascript">
  ;(function() {
  'use strict'

    function pad2(num) {
      if (num &lt; 10) return '0' + num
      return '' + num
    }

    function pad4(num) {
      if (num &lt; 10) return '000' + num
      if (num &lt; 100) return '00' + num
      if (num &lt; 1000) return '0' + num
      return '' + num
    }

    function GeneralizedTime(generalizedTime) {
	this.rawData = generalizedTime;
    }

    GeneralizedTime.prototype.getYear = function () {
	return parseInt(this.rawData.substring(0, 4), 10);
    }

    GeneralizedTime.prototype.getMonth = function () {
	return parseInt(this.rawData.substring(4, 6), 10) - 1;
    }

    GeneralizedTime.prototype.getDay = function () {
	return parseInt(this.rawData.substring(6, 8), 10)
    },

    GeneralizedTime.prototype.getHours = function () {
	return parseInt(this.rawData.substring(8, 10), 10)
    },

    GeneralizedTime.prototype.getMinutes = function () {
	var minutes = parseInt(this.rawData.substring(10, 12), 10)
	if (minutes) return minutes
	return 0
    },

    GeneralizedTime.prototype.getSeconds = function () {
	var seconds = parseInt(this.rawData.substring(12, 14), 10)
	if (seconds) return seconds
	return 0
    },

    GeneralizedTime.prototype.getMilliseconds = function () {
	var startIdx
	if (time.indexOf('.') !== -1) {
	  startIdx = this.rawData.indexOf('.') + 1
	} else if (time.indexOf(',') !== -1) {
	  startIdx = this.rawData.indexOf(',') + 1
	} else {
	  return 0
	}

	var stopIdx = time.length - 1
	var fraction = '0' + '.' + time.substring(startIdx, stopIdx)
	var ms = parseFloat(fraction) * 1000
	return ms
    },

    GeneralizedTime.prototype.getTimeZone = function () {
	let time = this.rawData;
	var length = time.length
	var symbolIdx
	if (time.charAt(length - 1 ) === 'Z') return 0
	if (time.indexOf('+') !== -1) {
	  symbolIdx = time.indexOf('+')
	} else if (time.indexOf('-') !== -1) {
	  symbolIdx = time.indexOf('-')
	} else {
	  return NaN
	}

	var minutes = time.substring(symbolIdx + 2)
	var hours = time.substring(symbolIdx + 1, symbolIdx + 2)
	var one = (time.charAt(symbolIdx) === '+') ? 1 : -1

	var intHr = one * parseInt(hours, 10) * 60 * 60 * 1000
	var intMin = one * parseInt(minutes, 10) * 60 * 1000
	var ms = minutes ? intHr + intMin : intHr
	return ms
      }

    if (typeof exports === 'object') {
      module.exports = GeneralizedTime
    } else if (typeof define === 'function' &amp;&amp; define.amd) {
      define(GeneralizedTime)
    } else {
      window.GeneralizedTime = GeneralizedTime
    }
  }())
</script>
<script type="text/javascript">
  class Token {
    constructor(tokenInstance) {
    this.props = tokenInstance
    }
    
    formatBinaryTimeToDate(d) {
      return d.toLocaleDateString()
    }
    formatBinaryTimeToTime(d) {
      return d.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
    }
    formatGeneralizedTimeToDate(str) {
      const d = new GeneralizedTime(str)
      return new Date(d.getYear(), d.getMonth(), d.getDay(), d.getHours(), d.getMinutes(), d.getSeconds()).toLocaleDateString()
    }
    formatGeneralizedTimeToTime(str) {
      const d = new GeneralizedTime(str)
      return new Date(d.getYear(), d.getMonth(), d.getDay(), d.getHours(), d.getMinutes(), d.getSeconds()).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
    }
    
    render() {
      let time;
      let date;
      if (this.props.time == null) {
          time = ""
          date = ""
      } else {
          time = this.formatGeneralizedTimeToTime(this.props.time.generalizedTime)
          date = this.props.time == null ? "": this.formatGeneralizedTimeToDate(this.props.time.generalizedTime)
      }
      const result = `&lt;div&gt;
        &lt;div&gt;
          &lt;span class="tbml-count"&gt;x${this.props._count}&lt;/span&gt;  &lt;span class="tbml-category"&gt;${this.props.name}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;span class="tbml-venue"&gt;${this.props.venue}&lt;/span&gt;
        &lt;/div&gt;
         &lt;div style="margin: 0px; padding:0px; clear: both; height: 6px"&gt;
         &amp;nbsp;
         &lt;/div&gt;
        &lt;div&gt;
          &lt;img src="data:image/png;base64,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" class="data-icon"/&gt;
          &lt;span class="tbml-date"&gt;${date}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div&gt;
          &lt;span class="tbml-time"&gt;${time}, ${this.props.locality}&lt;/span&gt;
        &lt;/div&gt;
      &lt;/div&gt;`;
    return result
    }
  }
    
  web3.tokens.dataChanged = (oldTokens, updatedTokens) =&gt; {
        const currentTokenInstance = web3.tokens.data.currentInstance
        const domHtml = new Token(currentTokenInstance).render()
        document.getElementById('root').innerHTML = domHtml
  }
</script>
<div id="root"/>

      </ts:view>
    </ts:token-card>
    <ts:action>
      <!-- this action is of the model confirm-back.
      It should be <ts:action model="confirm-back"> but Weiwu
      shied away from specifying that due to the likely change of design causing an upgrade path issue.

      window.onConfirm is called if user hit "confirm";
      window.close() causes the back button to be pressed.
      -->
      <ts:name xml:lang="en">Enter</ts:name>
      <ts:name xml:lang="zh">入場</ts:name>
      <ts:name xml:lang="es">Entrar</ts:name>
      <ts:exclude selection="expired"/>
      <style type="text/css">	.tbml-count {
	  font-family: "SourceSansPro";
	  font-weight: bolder;
	  font-size: 21px;
	  color: rgb(117, 185, 67);
	}
	.tbml-category {
	  font-family: "SourceSansPro";
	  font-weight: lighter;
	  font-size: 21px;
	  color: rgb(67, 67, 67);
	}
	.tbml-venue {
	  font-family: "SourceSansPro";
	  font-weight: lighter;
	  font-size: 16px;
	  color: rgb(67, 67, 67);
	}
	.tbml-date {
	  font-family: "SourceSansPro";
	  font-weight: bold;
	  font-size: 14px;
	  color: rgb(112, 112, 112);
	  margin-left: 7px;
	  margin-right: 7px;
	}
	.tbml-time {
	  font-family: "SourceSansPro";
	  font-weight: lighter;
	  font-size: 16px;
	  color: rgb(112, 112, 112);
	}
    html {
    }
    
    body {
    padding: 0px;
    margin: 0px;
    }
    
    div {
    margin: 0px;
    padding: 0px;
    }

    .data-icon {
    height:16px;
    vertical-align: middle
    }
</style>
      <ts:view xml:lang="en">
        <script type="text/javascript">
window.onload = function startup() {
    // 1. call API to fetch challenge
    fetch('http://stormbird.duckdns.org:8080/api/getChallenge')
        .then(function (response) {
            return response.text()
        })
        .then(function (response) {
            document.getElementById('msg').innerHTML = 'Challenge: ' + response
            window.challenge = response
        })
}

window.onConfirm = function onConfirm(signature) {
    if (window.challenge === undefined || window.challenge.length == 0) return
    const challenge = window.challenge
    document.getElementById('status').innerHTML = 'Wait for signature...'
    // 2. sign challenge to generate response
    web3.personal.sign({ data: challenge }, function (error, value) {
		if (error != null) {
		  document.getElementById('status').innerHTML = error
		  window.onload()
		  return
		}

        document.getElementById('status').innerHTML = 'Verifying credentials ...'
        // 3. open door
        fetch(`http://stormbird.duckdns.org:8080/api/checkSignature?contract=0x0C8D487DD27D7c4A027D9f92915659139e0b2FF2&amp;challenge=${challenge}&amp;sig=${value}`)
            .then(function (response) {
                return response.text()
            })
            .then(function (response) {
                if (response == "pass") {
                    document.getElementById('status').innerHTML = 'Entrance granted!'
                    window.close()
                } else {
                    document.getElementById('status').innerHTML = 'Failed with: ' + response
                }
            })
    })
    window.challenge = ''
	document.getElementById('msg').innerHTML = ''
}
</script>

<h3>Welcome to Craig Wright's house!</h3>
<div id="msg">Preparing to unlock the entrance door.</div>
<div id="status"/>

      </ts:view>
    </ts:action>
  </ts:cards>
  <ts:attribute-types>
    <ts:attribute-type id="locality" oid="2.5.4.7" syntax="1.3.6.1.4.1.1466.115.121.1.15">
      <ts:name xml:lang="en">City</ts:name>
      <ts:name xml:lang="zh">城市</ts:name>
      <ts:name xml:lang="es">Ciudad</ts:name>
      <ts:name xml:lang="ru">город</ts:name>
      <ts:origin as="mapping" bitmask="00000000000000000000000000000000FF000000000000000000000000000000">
        <ts:mapping>
          <ts:option key="1">
            <ts:value xml:lang="ru">Москва́</ts:value>
            <ts:value xml:lang="en">Sydney</ts:value>
            <ts:value xml:lang="zh">莫斯科</ts:value>
            <ts:value xml:lang="es">Moscú</ts:value>
          </ts:option>
        </ts:mapping>
      </ts:origin>
      <ts:origin contract="erc875">
        <ts:function name="getLocality">
          <ts:inputs>
            <ts:uint256 ref="tokenID"/>
          </ts:inputs>
        </ts:function>
      </ts:origin>
    </ts:attribute-type>
    <ts:attribute-type id="venue" syntax="1.3.6.1.4.1.1466.115.121.1.15">
      <ts:name xml:lang="en">Venue</ts:name>
      <ts:name xml:lang="zh">场馆</ts:name>
      <ts:name xml:lang="es">Lugar</ts:name>
      <ts:name xml:lang="ru">место встречи</ts:name>
      <ts:origin as="mapping" bitmask="0000000000000000000000000000000000FF0000000000000000000000000000">
        <ts:mapping>
          <ts:option key="1">
            <ts:value xml:lang="ru">Стадион Калининград</ts:value>
            <ts:value xml:lang="en">Craig Wright's House</ts:value>
            <ts:value xml:lang="zh">加里宁格勒体育场</ts:value>
            <ts:value xml:lang="es">Estadio de Kaliningrado</ts:value>
          </ts:option>
        </ts:mapping>
      </ts:origin>
    </ts:attribute-type>
    <ts:attribute-type id="time" syntax="1.3.6.1.4.1.1466.115.121.1.24">
      <ts:name xml:lang="en">Time</ts:name>
      <ts:name xml:lang="zh">时间</ts:name>
      <ts:name xml:lang="es">Tiempo</ts:name>
      <ts:name xml:lang="ru">время</ts:name>
      <!-- keys used here are BinaryTime (RFC6019) for backward compatibility,
           don't copy this behaviour when creating new assets -->
      <ts:origin as="mapping" bitmask="000000000000000000000000000000000000FFFFFFFF00000000000000000000">
        <ts:mapping>
          <ts:option key="1531586800">
            <ts:value>20200714170000+0300</ts:value>
          </ts:option>
        </ts:mapping>
      </ts:origin>
    </ts:attribute-type>
    <!-- James Sangalli removed these attributes "to make life easier"
    <ts:attribute-type id="country" oid="2.5.4.7" syntax="1.3.6.1.4.1.1466.115.121.1.15">
      <ts:name xml:lang="en">Country</ts:name>
      <ts:name xml:lang="zh">国家</ts:name>
      <ts:name xml:lang="es">País</ts:name>
      <ts:origin bitmask="FFFF000000000000000000000000000000000000000000000000000000000000" as="utf8"/>
    </ts:attribute-type>
    <ts:attribute-type id="start" syntax="1.3.6.1.4.1.1466.115.121.1.24">
      <ts:name>🕑</ts:name>
      <ts:origin bitmask="0000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0000000000000000000000" as="utf8"/>
    </ts:attribute-type>
    <ts:attribute-type id="numero" syntax="1.3.6.1.4.1.1466.115.121.1.27">
      <ts:name>№</ts:name>
      <ts:origin bitmask="000000000000000000000000000000000000000000FFFF000000000000000000" as="unsigned"/>
    </ts:attribute-type>
    <ts:attribute-type id="category" syntax="1.3.6.1.4.1.1466.115.121.1.15">
      <ts:name xml:lang="en">Category</ts:name>
      <ts:name xml:lang="zh">等级</ts:name>
      <ts:name xml:lang="es">Clase</ts:name>
      <ts:origin bitmask="0000000000000000000000000000000000000000000000FFFFFFFFFF00000000" as="utf8"/>
    </ts:attribute-type>
    <ts:attribute-type id="section" syntax="1.3.6.1.4.1.1466.115.121.1.15">
      <ts:name xml:lang="en">Section</ts:name>
      <ts:name xml:lang="zh">区号</ts:name>
      <ts:name xml:lang="es">Sección</ts:name>
      <ts:origin bitmask="00000000000000000000000000000000000000000000000000000000FFFFFFFF" as="utf8"/>
    </ts:attribute-type>
    -->
    <ts:attribute-type id="expired" syntax="1.3.6.1.4.1.1466.115.121.1.7"> <!-- boolean -->
      <ts:origin as="mapping" contract="erc875">
        <ts:function name="isExpired">
          <ts:inputs>
            <ts:uint256 ref="tokenID"/>
          </ts:inputs>
        </ts:function>
        <ts:mapping>
          <ts:option key="0">
            <ts:value>FALSE</ts:value>
          </ts:option>
          <ts:option key="1">
            <ts:value>TRUE</ts:value>
          </ts:option>
        </ts:mapping>
      </ts:origin>
    </ts:attribute-type>
    <ts:attribute-type as="utf8" id="street" syntax="1.3.6.1.4.1.1466.115.121.1.15"> <!-- string -->
      <ts:origin contract="erc875">
        <ts:function name="getStreet">
          <ts:inputs>
            <ts:uint256 ref="tokenID"/>
          </ts:inputs>
        </ts:function>
      </ts:origin>
    </ts:attribute-type>
    <ts:attribute-type as="utf8" id="building" syntax="1.3.6.1.4.1.1466.115.121.1.15"> <!-- string -->
      <ts:origin contract="erc875">
        <ts:function name="getBuildingName">
          <ts:inputs>
            <ts:uint256 ref="tokenID"/>
          </ts:inputs>
        </ts:function>
      </ts:origin>
    </ts:attribute-type>
    <ts:attribute-type as="utf8" id="state" syntax="1.3.6.1.4.1.1466.115.121.1.15"> <!-- string -->
      <ts:origin contract="erc875">
        <ts:function name="getState">
          <ts:inputs>
            <ts:uint256 ref="tokenID"/>
          </ts:inputs>
        </ts:function>
      </ts:origin>
    </ts:attribute-type>
  </ts:attribute-types>
</ts:token>